<!DOCTYPE html>
<html>
<head>
    <title>Dealership Database</title>
</head>
<body>
    <h1>Dealership Database Interface</h1>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <form action="/handle_query" method="post">
        <select name="query_type" onchange="showForm(this.value)">
            <option value="">Select a Query...</option>
            <option value="view_table">View Table</option>
            <option value="add_car">Add a Car</option>
            <option value="add_customer">Add a Customer</option>
            <option value="add_employee">Add a Employee</option>
        </select>

        <div id="view_table" style="display:none;">
            <select name="selected_table">
                <option value="">Select a Table...</option>
                {% for table in tables %}
                <option value="{{ table }}">{{ table }}</option>
                {% endfor %}
            </select>
            <input type="submit" value="View Selected Table">
        </div>

        <div id="add_car" style="display:none;">
            <input type="text" name="make" placeholder="Make">
            <input type="text" name="model" placeholder="Model">
            <input type="number" name="year" placeholder="Year">
            <input type="text" name="VIN" placeholder="VIN">
            <input type="number" name="purchase_price" placeholder="Purchase Price">
            <input type="number" name="sale_price" placeholder="Sale Price">
            <select name="status">
                <option value="available">Available</option>
                <option value="sold">Sold</option>
                <option value="maintenance">Maintenance</option>
            </select>
            <input type="number" name="dealership_id" placeholder="Dealers ID" placeholder="Dealership ID">
            <input type="submit" value="Add Car">
        </div>

        <div id="add_customer" style="display:none;">
            <input type="text" name="first_name" placeholder="First Name">
            <input type="text" name="last_name" placeholder="Last Name">
            <input type="text" name="email" placeholder="Email">
            <input type="text" name="phone" placeholder="Phone Number">
            <input type="text" name="address" placeholder="Address">
            <input type="submit" value="Add Customer">
        </div>

        <div id="add_employee" style="display:none;">
            <input type="text" name="first_name" placeholder="First Name" required>
            <input type="text" name="last_name" placeholder="Last Name" required>
            <input type="text" name="role" placeholder="Role" required>
            <input type="number" name="salary" placeholder="Salary" required>
            <input type="text" name="hire_date" placeholder="Hire Date" required>
            <input type="number" name="dealership_id" placeholder="Dealership ID" required>
            <input type="submit" value="Add Employee">
        </div>
        
    </form>

    <!-- Textarea for custom query -->
    <h2>Or enter a custom query:</h2>
    <form action="/execute_query" method="post">
        <textarea name="query" rows="4" cols="50"></textarea>
        <br>
        <input type="submit" value="Execute Query">
    </form>

<script>
    function showForm(queryType) {
        document.getElementById('view_table').style.display = 'none';
        document.getElementById('add_car').style.display = 'none';
        document.getElementById('add_customer').style.display = 'none';
        document.getElementById('add_employee').style.display = 'none';

        if (queryType) {
            document.getElementById(queryType).style.display = 'block';
        }
    }
</script>
</body>
</html>